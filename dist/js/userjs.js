"use strict";function is(t){return $(t).is(t)}function toggleSide(){is(".min")?($("header.head .col-sm-3.side").removeClass("min"),$("aside.side.col-sm-3.col-xs-3").removeClass("min"),$("article.col-sm-9.col-xs-12.main").removeClass("min"),$("header.head .col-sm-9.nav").removeClass("min")):($("header.head .col-sm-3.side").addClass("min"),$("aside.side.col-sm-3.col-xs-3").addClass("min"),$("article.col-sm-9.col-xs-12.main").addClass("min"),$("header.head .col-sm-9.nav").addClass("min"))}function sideActive(){var t=window.location.href,e=!1;$(".side.panel-group p > a").each(function(){t.indexOf($(this).attr("href"))>=0&&(e=!0)}),e?$(".side.panel-group .panel").eq(2).find("p").addClass("active"):$(".side.panel-group ul a").each(function(){t.indexOf($(this).attr("href"))>=0&&($(this).parents(".panel").find("p > a").click(),$(this).addClass("active"))})}function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}var durDateStart=24,httpGetCfg={baseURL:"",headers:{Accept:"application/json"},validateStatus:function(t){return t>=200&&t<300||404===t}};$(function(){if(is("#aiAnalysis")){Highcharts.setOptions(chartTheme);new Vue({el:"#aiAnalysis",data:{loading:!1,category:[],companyOri:[],druDate:[],companySelect:"",backTestRltColumns:[],dataSheetColumns:[],rocColumns:[],trainingColumns:[],rocSelect:"全部上市櫃股票",trainingSelect:"全部上市櫃股票",trainingMaterials:[],methodOfPrediction:[],predictiveAccuracy:null,predictiveEffect:null,predictionConclusion:[],roc:[],setOpts:{selectCategory:"全部上市櫃股票",companyName:"",companyNum:"",buyDate:"2019/06",durTime:24,ror:50},statisticalVerify:null,rocTable:null,trainingTable:null,backTestRltTable:null,backTestDataSheetTable:null},computed:{companyInfo:function(){var t=this;return"全部上市櫃股票"===this.setOpts.selectCategory?this.companyOri:this.companyOri.filter(function(e){return e["產業類別"]===t.setOpts.selectCategory})},filterRoc:function(){var t=this;return this.$nextTick(function(){t.rocTable=$("#rocCategory .table").DataTable()}),this.roc},filterTrainingMaterials:function(){var t=this;return this.$nextTick(function(){t.trainingTable=$("#trainingMaterialsCategory .table").DataTable()}),"全部上市櫃股票"===this.trainingSelect?this.trainingMaterials:this.trainingMaterials.filter(function(e){return e["產業類別"]===t.trainingSelect})}},methods:{submit:function(){var t=this;console.warn("send info",this.setOpts),this.loading=!0;var e=this.getBackTestRlt(),a=this.getBackTestDataSheet(),n=this.getTrainingMaterials(),s=this.getMethodOfPrediction(),o=this.getPredictiveAccuracy(),r=this.getPredictiveEffect(),i=this.getPredictionConclusion(),c=this.getRoc(),l=this.getStatisticalVerify();Promise.all([e,a,n,s,o,r,i,c,l]).then(function(){t.renderTable(),t.loading=!1})},getBackTestRlt:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/strategyModel/backTestRlt.json",axios.create(httpGetCfg).get().then(function(a){_.isNil(t.backTestRltTable)||(t.backTestRltTable.destroy(),t.backTestRltTable=null),t.backTestRlt=[],t.backTestRltColumns=[],Object.keys(a.data[0]).forEach(function(e){t.backTestRltColumns.push(e)}),a.data.forEach(function(e){var a={};t.backTestRltColumns.forEach(function(t){a[t]=e[t]}),t.backTestRlt.push(a)}),e()}).catch(function(t){console.warn("error",t.message),a()})})},getBackTestDataSheet:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/strategyModel/backTestDataSheet.json",axios.create(httpGetCfg).get().then(function(a){_.isNil(t.backTestDataSheetTable)||(t.backTestDataSheetTable.destroy(),t.backTestDataSheetTable=null),t.backTestDataSheet=[],t.dataSheetColumns=[],Object.keys(a.data[0]).forEach(function(e){t.dataSheetColumns.push(e)}),a.data.forEach(function(e){var a={};t.dataSheetColumns.forEach(function(t){a[t]=e[t]}),t.backTestDataSheet.push(a)}),e()}).catch(function(t){console.warn("error",t.message),a()})})},getStatisticalVerify:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/strategyModel/statisticalVerify.json",axios.create(httpGetCfg).get().then(function(a){t.statisticalVerify=a.data.map(function(t){return _.get(t,"文字敘述")}),e()}).catch(function(t){console.warn("error",t.message),a()})})},getTrainingMaterials:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/ai/trainingMaterials.json",axios.create(httpGetCfg).get().then(function(a){_.isNil(t.trainingTable)||t.trainingTable.destroy(),t.trainingMaterials=[],t.trainingColumns=[],Object.keys(a.data[0]).forEach(function(e){t.trainingColumns.push(e)}),a.data.forEach(function(e){var a={};t.trainingColumns.forEach(function(t){a[t]=e[t]}),t.trainingMaterials.push(a)}),e()}).catch(function(t){console.warn("error",t.message),a()})})},getMethodOfPrediction:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/ai/methodOfPrediction.json",axios.create(httpGetCfg).get().then(function(a){t.methodOfPrediction=a.data.map(function(t){return _.get(t,"文字敘述")}),e()}).catch(function(t){console.warn("error",t.message),a()})})},getPredictiveAccuracy:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/ai/predictiveAccuracy.json",axios.create(httpGetCfg).get().then(function(a){t.predictiveAccuracy=a.data.map(function(t){return _.get(t,"文字敘述")}),e()}).catch(function(t){console.warn("error",t.message),a()})})},getPredictiveEffect:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/ai/predictiveEffect.json",axios.create(httpGetCfg).get().then(function(a){t.predictiveEffect=a.data.map(function(t){return _.get(t,"文字敘述")}),e()}).catch(function(t){console.warn("error",t.message),a()})})},getPredictionConclusion:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/ai/predictionConclusion.json",axios.create(httpGetCfg).get().then(function(a){t.predictionConclusion=a.data.map(function(t){return _.get(t,"文字敘述")}),e()}).catch(function(t){console.warn("error",t.message),a()})})},getRoc:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/ai/roc.json",axios.create(httpGetCfg).get().then(function(a){_.isNil(t.rocTable)||t.rocTable.destroy(),t.roc=[],t.rocColumns=[],Object.keys(a.data[0]).forEach(function(e){t.rocColumns.push(e)}),a.data.forEach(function(e){var a={};t.rocColumns.forEach(function(t){a[t]=e[t]}),t.roc.push(a)}),e()}).catch(function(t){console.warn("error",t.message),a()})})},renderTable:function(){var t=this;this.$nextTick(function(){t.backTestRltTable=$("#barCollapse-2 .table").DataTable(),t.backTestDataSheetTable=$("#barCollapse-3 .table").DataTable()})}},watch:{companyInfo:function(){this.companySelect=this.companyInfo[0]["公司代號"]},companySelect:function(){var t=this,e=this.companyInfo.find(function(e){return e["公司代號"]===t.companySelect});this.setOpts.companyName=_.get(e,"公司名稱"),this.setOpts.companyNum=_.get(e,"公司代號")}},beforeMount:function(){this.druDate=Array.from({length:24},function(t,e){return e+durDateStart})},beforeCreate:function(){var t=this;httpGetCfg.baseURL="/dist/data/menu/industry.json",axios.create(httpGetCfg).get().then(function(e){t.category=e.data.map(function(t){return t.indus})}).catch(function(t){console.warn("error",t.message)}),httpGetCfg.baseURL="/dist/data/menu/company.json",axios.create(httpGetCfg).get().then(function(e){t.companyOri=e.data}).catch(function(t){console.warn("error",t.message)})}})}});var chartTheme={colors:["#a986ce"],chart:{borderColor:"#000000",borderWidth:0,className:"dark-container",plotBackgroundColor:"rgba(255, 255, 255, .1)",plotBorderColor:"#CCCCCC",plotBorderWidth:0},xAxis:{labels:{style:{color:"#3e3a39"}},gridLineColor:"#898989"},yAxis:{labels:{style:{color:"#3e3a39"}},gridLineColor:"#898989",gridLineWidth:.25},tooltip:{backgroundColor:"#a986ce",style:{color:"#FFFFFF"}},scrollbar:{barBackgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[.4,"#888"],[.6,"#555"]]},barBorderColor:"#fff",buttonArrowColor:"#fff",buttonBackgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[.4,"#888"],[.6,"#555"]]},buttonBorderColor:"#CCC",rifleColor:"#FFF",trackBackgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#000"],[1,"#333"]]},trackBorderColor:"#666"}},barOpts={chart:{type:"column",scrollablePlotArea:{minWidth:1e3,scrollPositionX:1}},credits:{enabled:!1},title:{text:null},xAxis:{categories:["Apples","Bananas","Oranges"]},yAxis:{title:null},plotOptions:{series:{pointPadding:0,borderWidth:0}},series:[{name:"Jane",data:[1,0,4]}],tooltip:{formatter:function(){return"<b>"+this.point.y+"</b>"}}};$(function(){sideActive(),$(".toggle-side a").click(function(){toggleSide()}),$(window).width()<768&&(toggleSide(),setTimeout(function(){$(".collapse.in").each(function(){$(this).hide()})},1e3))});var durDateStart=24,httpGetCfg={baseURL:"",headers:{Accept:"application/json"},validateStatus:function(t){return t>=200&&t<300||404===t}};Highcharts.setOptions(chartTheme),$(function(){if(is("#buffet"))new Vue({el:"#buffet",data:{loading:!1,category:[],druDate:[],selectChart:null,backTestRltColumns:[],dataSheetColumns:[],latestBuyColumns:[],stopLossColumns:[],latestSelect:"全部上市櫃股票",stopLossSelect:"全部上市櫃股票",setOpts:{company:"全部上市櫃股票",endTime:"2019/06",druTime:24,stopCall:!1,setPut:!1,setCall:!1,stopLoss:-20},backTestRlt:[],backTestDataSheet:[],statisticalVerify:null,investmentModelDataSource:[],analyzeText:[],latestBuy:[],stopLossCondition:[],latestTable:null,stopLossTable:null,backTestRltTable:null,backTestDataSheetTable:null},computed:{chartType:function(){if(this.investmentModelDataSource.length>0){var t=[];return this.investmentModelDataSource.forEach(function(e){Object.keys(e).forEach(function(e){"買進年度"!==e&&t.push(e)})}),[].concat(_toConsumableArray(new Set(t)))}return[]},filterLatestSheet:function(){var t=this;return this.$nextTick(function(){t.latestTable=$("#latestCategory .table").DataTable()}),"全部上市櫃股票"===this.latestSelect?this.latestBuy:this.latestBuy.filter(function(e){return e["產業類別"]===t.latestSelect})},filterStopLoss:function(){var t=this;return this.$nextTick(function(){t.stopLossTable=$("#stopLossCategory .table").DataTable()}),"全部上市櫃股票"===this.stopLossSelect?this.stopLossCondition:this.stopLossCondition.filter(function(e){return e["產業類別"]===t.stopLossSelect})}},methods:{submit:function(){var t=this;this.loading=!0;var e=this.getBackTestRlt(),a=this.getBackTestDataSheet(),n=this.getStatisticalVerify(),s=this.getInvestmentModelDataSource(),o=this.getAnalyzeText(),r=this.getLatestBuy(),i=this.getStopLossCondition(),c=this.getChartData();Promise.all([e,a,n,s,o,r,i,c]).then(function(){t.renderChart(),t.renderTable(),t.loading=!1})},getBackTestRlt:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/strategyModel/backTestRlt.json",axios.create(httpGetCfg).get().then(function(a){_.isNil(t.backTestRltTable)||(t.backTestRltTable.destroy(),t.backTestRltTable=null),t.backTestRlt=[],t.backTestRltColumns=[],Object.keys(a.data[0]).forEach(function(e){t.backTestRltColumns.push(e)}),a.data.forEach(function(e){var a={};t.backTestRltColumns.forEach(function(t){a[t]=e[t]}),t.backTestRlt.push(a)}),e()}).catch(function(t){console.warn("error",t.message),a()})})},getBackTestDataSheet:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/strategyModel/backTestDataSheet.json",axios.create(httpGetCfg).get().then(function(a){_.isNil(t.backTestDataSheetTable)||(t.backTestDataSheetTable.destroy(),t.backTestDataSheetTable=null),t.backTestDataSheet=[],t.dataSheetColumns=[],Object.keys(a.data[0]).forEach(function(e){t.dataSheetColumns.push(e)}),a.data.forEach(function(e){var a={};t.dataSheetColumns.forEach(function(t){a[t]=e[t]}),t.backTestDataSheet.push(a)}),e()}).catch(function(t){console.warn("error",t.message),a()})})},getStatisticalVerify:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/strategyModel/statisticalVerify.json",axios.create(httpGetCfg).get().then(function(a){t.statisticalVerify=a.data.map(function(t){return _.get(t,"文字敘述")}),e()}).catch(function(t){console.warn("error",t.message),a()})})},getInvestmentModelDataSource:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/strategyModel/investmentModelDataSource.json",axios.create(httpGetCfg).get().then(function(a){t.investmentModelDataSource=a.data,_.isNil(t.selectChart)&&(t.selectChart=t.chartType[0]),e()}).catch(function(t){console.warn("error",t.message),a()})})},getAnalyzeText:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/strategyModel/analyzeText.json",axios.create(httpGetCfg).get().then(function(a){t.analyzeText=a.data.map(function(t){return _.get(t,"文字敘述")}),e()}).catch(function(t){console.warn("error",t.message),a()})})},getLatestBuy:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/strategyModel/latestBuy.json",axios.create(httpGetCfg).get().then(function(a){t.latestBuy=[],t.latestBuyColumns=[],Object.keys(a.data[0]).forEach(function(e){t.latestBuyColumns.push(e)}),a.data.forEach(function(e){var a={};t.latestBuyColumns.forEach(function(t){a[t]=e[t]}),t.latestBuy.push(a)}),e()}).catch(function(t){console.warn("error",t.message),a()})})},getStopLossCondition:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/strategyModel/stopLossCondition.json",axios.create(httpGetCfg).get().then(function(a){t.stopLossCondition=[],t.stopLossColumns=[],Object.keys(a.data[0]).forEach(function(e){t.stopLossColumns.push(e)}),a.data.forEach(function(e){var a={};t.stopLossColumns.forEach(function(t){a[t]=e[t]}),t.stopLossCondition.push(a)}),e()}).catch(function(t){console.warn("error",t.message),a()})})},getChartData:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/chartData/chartData.json";var n=axios.create(httpGetCfg).get();Promise.all([n]).then(function(a){t.chartData=a[0].data,e()}).catch(function(t){a(t)})})},renderChart:function(){var t=this;if(0!==this.investmentModelDataSource.length){var e=_.cloneDeep(barOpts);if(!_.isNil(_.get(this.investmentModelDataSource[0],this.selectChart))){e.xAxis.categories=null,e.series=[{name:null,data:[],showInLegend:!1}],this.investmentModelDataSource.forEach(function(a){e.series[0].data.push([a["買進年度"],a[t.selectChart]])}),e.series[0].data.sort(function(t,e){return t[0]-e[0]});Highcharts.chart("chartContent",e)}}},renderTable:function(){var t=this;this.$nextTick(function(){t.backTestRltTable=$("#barCollapse-2 .table").DataTable(),t.backTestDataSheetTable=$("#barCollapse-3 .table").DataTable()})}},watch:{selectChart:function(){this.renderChart()},latestSelect:function(){_.isNil(this.latestTable)||this.latestTable.destroy()},stopLossSelect:function(){_.isNil(this.stopLossTable)||this.stopLossTable.destroy()}},beforeMount:function(){this.druDate=Array.from({length:24},function(t,e){return e+durDateStart})},beforeCreate:function(){var t=this;httpGetCfg.baseURL="/dist/data/menu/industry.json",axios.create(httpGetCfg).get().then(function(e){t.category=e.data.map(function(t){return t.indus})}).catch(function(t){console.warn("error",t.message)})}})});var durDateStart=24,httpGetCfg={baseURL:"",headers:{Accept:"application/json"},validateStatus:function(t){return t>=200&&t<300||404===t}};$(function(){if(is("#peterLynch")){chartTheme.colors=["#509de2"],Highcharts.setOptions(chartTheme);new Vue({el:"#peterLynch",data:{loading:!1,category:[],druDate:[],selectChart:null,backTestRltColumns:[],dataSheetColumns:[],latestBuyColumns:[],stopLossColumns:[],latestSelect:"全部上市櫃股票",stopLossSelect:"全部上市櫃股票",setOpts:{company:"全部上市櫃股票",endTime:"2019/06",druTime:24,stopCall:!1,setPut:!1,setCall:!1},backTestRlt:null,backTestDataSheet:null,statisticalVerify:null,investmentModelDataSource:[],analyzeText:[],latestBuy:null,stopLossCondition:null,latestTable:null,stopLossTable:null,backTestRltTable:null,backTestDataSheetTable:null},computed:{chartType:function(){if(this.investmentModelDataSource.length>0){var t=[];return this.investmentModelDataSource.forEach(function(e){Object.keys(e).forEach(function(e){"買進年度"!==e&&t.push(e)})}),[].concat(_toConsumableArray(new Set(t)))}return[]},filterLatestSheet:function(){var t=this;return this.$nextTick(function(){t.latestTable=$("#latestCategory .table").DataTable()}),"全部上市櫃股票"===this.latestSelect?this.latestBuy:this.latestBuy.filter(function(e){return e["產業類別"]===t.latestSelect})},filterStopLoss:function(){var t=this;return this.$nextTick(function(){t.stopLossTable=$("#stopLossCategory .table").DataTable()}),"全部上市櫃股票"===this.stopLossSelect?this.stopLossCondition:this.stopLossCondition.filter(function(e){return e["產業類別"]===t.stopLossSelect})}},methods:{submit:function(){var t=this;this.loading=!0,console.warn("send info",this.setOpts);var e=this.getBackTestRlt(),a=this.getBackTestDataSheet(),n=this.getStatisticalVerify(),s=this.getInvestmentModelDataSource(),o=this.getAnalyzeText(),r=this.getLatestBuy(),i=this.getStopLossCondition(),c=this.getChartData();Promise.all([e,a,n,s,o,r,i,c]).then(function(){t.renderChart(),t.renderTable(),t.loading=!1})},getBackTestRlt:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/strategyModel/backTestRlt.json",axios.create(httpGetCfg).get().then(function(a){_.isNil(t.backTestRltTable)||(t.backTestRltTable.destroy(),t.backTestRltTable=null),t.backTestRlt=[],t.backTestRltColumns=[],Object.keys(a.data[0]).forEach(function(e){t.backTestRltColumns.push(e)}),a.data.forEach(function(e){var a={};t.backTestRltColumns.forEach(function(t){a[t]=e[t]}),t.backTestRlt.push(a)}),e()}).catch(function(t){console.warn("error",t.message),a()})})},getBackTestDataSheet:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/strategyModel/backTestDataSheet.json",axios.create(httpGetCfg).get().then(function(a){_.isNil(t.backTestDataSheetTable)||(t.backTestDataSheetTable.destroy(),t.backTestDataSheetTable=null),t.backTestDataSheet=[],t.dataSheetColumns=[],Object.keys(a.data[0]).forEach(function(e){t.dataSheetColumns.push(e)}),a.data.forEach(function(e){var a={};t.dataSheetColumns.forEach(function(t){a[t]=e[t]}),t.backTestDataSheet.push(a)}),e()}).catch(function(t){console.warn("error",t.message),a()})})},getStatisticalVerify:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/strategyModel/statisticalVerify.json",axios.create(httpGetCfg).get().then(function(a){t.statisticalVerify=a.data.map(function(t){return _.get(t,"文字敘述")}),e()}).catch(function(t){console.warn("error",t.message),a()})})},getInvestmentModelDataSource:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/strategyModel/investmentModelDataSource.json",axios.create(httpGetCfg).get().then(function(a){t.investmentModelDataSource=a.data,_.isNil(t.selectChart)&&(t.selectChart=t.chartType[0]),e()}).catch(function(t){console.warn("error",t.message),a()})})},getAnalyzeText:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/strategyModel/analyzeText.json",axios.create(httpGetCfg).get().then(function(a){t.analyzeText=a.data.map(function(t){return _.get(t,"文字敘述")}),e()}).catch(function(t){console.warn("error",t.message),a()})})},getLatestBuy:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/strategyModel/latestBuy.json",axios.create(httpGetCfg).get().then(function(a){t.latestBuy=[],t.latestBuyColumns=[],Object.keys(a.data[0]).forEach(function(e){t.latestBuyColumns.push(e)}),a.data.forEach(function(e){var a={};t.latestBuyColumns.forEach(function(t){a[t]=e[t]}),t.latestBuy.push(a)}),console.warn("this.latestBuy",t.latestBuy),e()}).catch(function(t){console.warn("error",t.message),a()})})},getStopLossCondition:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/strategyModel/stopLossCondition.json",axios.create(httpGetCfg).get().then(function(a){t.stopLossCondition=[],t.stopLossColumns=[],Object.keys(a.data[0]).forEach(function(e){t.stopLossColumns.push(e)}),a.data.forEach(function(e){var a={};t.stopLossColumns.forEach(function(t){a[t]=e[t]}),t.stopLossCondition.push(a)}),e()}).catch(function(t){console.warn("error",t.message),a()})})},getChartData:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/chartData/chartData.json";var n=axios.create(httpGetCfg).get();Promise.all([n]).then(function(a){t.chartData=a[0].data,e()}).catch(function(t){a(t)})})},renderChart:function(){var t=this;if(0!==this.investmentModelDataSource.length){var e=_.cloneDeep(barOpts);if(!_.isNil(_.get(this.investmentModelDataSource[0],this.selectChart))){console.warn("render chart");e.xAxis.categories=null,e.series=[{name:null,data:[],showInLegend:!1}],this.investmentModelDataSource.forEach(function(a){e.series[0].data.push([a["買進年度"],a[t.selectChart]])}),e.series[0].data.sort(function(t,e){return t[0]-e[0]});Highcharts.chart("chartContent",e)}}},renderTable:function(){var t=this;this.$nextTick(function(){t.backTestRltTable=$("#barCollapse-2 .table").DataTable(),t.backTestDataSheetTable=$("#barCollapse-3 .table").DataTable()})}},watch:{selectChart:function(){this.renderChart()},latestSelect:function(){_.isNil(this.latestTable)||this.latestTable.destroy()},stopLossSelect:function(){_.isNil(this.stopLossTable)||this.stopLossTable.destroy()}},beforeMount:function(){this.druDate=Array.from({length:24},function(t,e){return e+durDateStart})},beforeCreate:function(){var t=this;httpGetCfg.baseURL="/dist/data/menu/industry.json",axios.create(httpGetCfg).get().then(function(e){t.category=e.data.map(function(t){return t.indus})}).catch(function(t){console.warn("error",t.message)})}})}});var durDateStart=24,httpGetCfg={baseURL:"",headers:{Accept:"application/json"},validateStatus:function(t){return t>=200&&t<300||404===t}},analyTemp={selectChart:"多圖並列分析",companyCategory:"全部上市櫃股票",companyName:"",companyNum:"",dataType:"財報年報",durTime:"最近1年",categoryIdx:"現金流量",categoryItem:"年度投資活動現金流量",dataOption:"當期值",startTime:"2012/01",endTime:"2019/06"},colorCategory=["#b77ea6","#57a6c1","#c48a35"];$(function(){if(is("#dataAnalysis")){chartTheme.xAxis.gridLineWidth=.25,chartTheme.colors=colorCategory,Highcharts.setOptions(chartTheme);new Vue({el:"#dataAnalysis",data:{loading:!1,colorCategory:colorCategory,category:[],companyOri:[],druDate:[],categoryOri:[],unit:[],chartData:[],dataColumns:[],companySelect:"",analysisOpt:_.cloneDeep(analyTemp)},computed:{companyInfo:function(){var t=this;return"全部上市櫃股票"===this.selectCategory?this.companyOri:this.companyOri.filter(function(e){return e["產業類別"]===t.analysisOpt.companyCategory})},dataCategory:function(){return Array.from(new Set(this.categoryOri.map(function(t){return t["指標類型"]})))},indexCategory:function(){var t=this;return Array.from(new Set(this.categoryOri.filter(function(e){return e["指標類型"]===t.analysisOpt.dataType}).map(function(t){return t["指標類別"]})))},itemCategory:function(){var t=this;return this.categoryOri.filter(function(e){return e["指標類別"]===t.analysisOpt.categoryIdx}).map(function(t){return t["項目"]})},legend:function(){return this.dataColumns.filter(function(t){return"公司名稱"!==t&&"日期"!==t})}},methods:{getUnit:function(t){var e=this.unit.filter(function(e){return e["項目"]===t});return e.length>0?e[0]["單位"]:""},submit:function(){var t=this;this.loading=!0,this.getData().then(function(){t.renderChart(),t.loading=!1})},clear:function(){this.analysisOpt=_.cloneDeep(analyTemp)},getData:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/chartData/dataAnalytics.json",axios.create(httpGetCfg).get().then(function(a){t.chartData=[],t.dataColumns=[],Object.keys(a.data[0]).forEach(function(e){t.dataColumns.push(e)}),a.data.forEach(function(e){var a={};t.dataColumns.forEach(function(t){a[t]=e[t]}),t.chartData.push(a)}),e()}).catch(function(t){console.warn("error",t.message),a()})})},renderChart:function(){var t=this;if(0!==this.chartData.length){var e=_.cloneDeep(barOpts);e.chart.type="line",e.plotOptions.series.marker={enabled:!1};e.xAxis.categories=this.chartData.map(function(t){return t["日期"]});e.chart.scrollablePlotArea.minWidth=70*this.chartData.length;var a={name:null,data:[],showInLegend:!1};e.series=[],this.dataColumns.forEach(function(t,n){var s=_.cloneDeep(a);"公司名稱"!==t&&"日期"!==t&&(s.name=t,e.series.push(s))}),e.series.forEach(function(e){t.chartData.forEach(function(t){e.data.push(t[e.name])})});Highcharts.chart("chartContent",e)}}},watch:{"analysisOpt.dataType":function(){this.analysisOpt.categoryIdx=this.indexCategory[0]},"analysisOpt.categoryIdx":function(){this.analysisOpt.categoryItem=this.itemCategory[0]},companyInfo:function(t){0!==t.length&&(this.companySelect=this.companyInfo[0]["公司代號"])},companySelect:function(){var t=this,e=this.companyInfo.find(function(e){return e["公司代號"]===t.companySelect});this.analysisOpt.companyName=_.get(e,"公司名稱"),this.analysisOpt.companyNum=_.get(e,"公司代號")}},beforeMount:function(){this.druDate=Array.from({length:24},function(t,e){return e+durDateStart})},beforeCreate:function(){var t=this;httpGetCfg.baseURL="/dist/data/menu/industry.json",axios.create(httpGetCfg).get().then(function(e){t.category=e.data.map(function(t){return t.indus})}).catch(function(t){console.warn("error",t.message)}),httpGetCfg.baseURL="/dist/data/menu/company.json",axios.create(httpGetCfg).get().then(function(e){t.companyOri=e.data}).catch(function(t){console.warn("error",t.message)}),httpGetCfg.baseURL="/dist/data/menu/category.json",axios.create(httpGetCfg).get().then(function(e){t.categoryOri=e.data}).catch(function(t){console.warn("error",t.message)}),httpGetCfg.baseURL="/dist/data/menu/unit.json",axios.create(httpGetCfg).get().then(function(e){t.unit=e.data}).catch(function(t){console.warn("error",t.message)})}})}});var durDateStart=24,httpGetCfg={baseURL:"",headers:{Accept:"application/json"},validateStatus:function(t){return t>=200&&t<300||404===t}},setTemp={selectCategory:"全部上市櫃股票",companyName:"",companyNum:"",buyTime:"2019/06",durTime:"24"},guessTemp={dataType:"財報年報",durTime:"最近1年",categoryIdx:"現金流量",categoryItem:"年度投資活動現金流量",dataOption:"當期值"};Highcharts.setOptions(chartTheme),$(function(){if(is("#cusAiAnalysis"))new Vue({el:"#cusAiAnalysis",data:{loading:!1,category:[],companyOri:[],druDate:[],categoryOri:[],unit:[],companySelect:"",backTestRltColumns:[],dataSheetColumns:[],rocColumns:[],trainingColumns:[],rocSelect:"全部上市櫃股票",trainingSelect:"全部上市櫃股票",trainingMaterials:null,predictiveAccuracy:null,predictiveEffect:null,predictionConclusion:[],roc:null,statisticalVerify:null,setOpt:_.cloneDeep(setTemp),setSync:{methodOfPrediction:[]},getOpt:_.cloneDeep(guessTemp),guesSync:{methodOfPrediction:[]},rocTable:null,trainingTable:null,backTestRltTable:null,backTestDataSheetTable:null},computed:{companyInfo:function(){var t=this;return"全部上市櫃股票"===this.setOpt.selectCategory?this.companyOri:this.companyOri.filter(function(e){return e["產業類別"]===t.setOpt.selectCategory})},dataCategory:function(){return Array.from(new Set(this.categoryOri.map(function(t){return t["指標類型"]})))},indexCategory:function(){var t=this;return Array.from(new Set(this.categoryOri.filter(function(e){return e["指標類型"]===t.getOpt.dataType}).map(function(t){return t["指標類別"]})))},itemCategory:function(){var t=this;return this.categoryOri.filter(function(e){return e["指標類別"]===t.getOpt.categoryIdx}).map(function(t){return t["項目"]})},filterRoc:function(){var t=this;return this.$nextTick(function(){t.rocTable=$("#rocCategory .table").DataTable()}),this.roc},filterTrainingMaterials:function(){var t=this;return this.$nextTick(function(){t.trainingTable=$("#trainingMaterialsCategory .table").DataTable()}),"全部上市櫃股票"===this.trainingSelect?this.trainingMaterials:this.trainingMaterials.filter(function(e){return e["產業類別"]===t.trainingSelect})}},methods:{send:function(){console.warn("預測目標",this.setOpt)},submit:function(t){var e=this;this.loading=!0,console.warn("預測因素",this.getOpt);var a=this.getBackTestRlt(),n=this.getBackTestDataSheet(),s=this.getTrainingMaterials(),o=this.getMethodOfPrediction(t),r=this.getPredictiveAccuracy(),i=this.getPredictiveEffect(),c=this.getPredictionConclusion(),l=this.getRoc(),u=this.getStatisticalVerify();Promise.all([a,n,s,o,r,i,c,l,u]).then(function(){e.renderTable(),e.loading=!1}).catch(function(t){console.warn("error",t)})},clear:function(){this.setOpt=_.cloneDeep(setTemp),this.getOpt=_.cloneDeep(guessTemp)},getUnit:function(t){var e=this.unit.filter(function(e){return e["項目"]===t});return e.length>0?e[0]["單位"]:""},getBackTestRlt:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/strategyModel/backTestRlt.json",axios.create(httpGetCfg).get().then(function(a){_.isNil(t.backTestRltTable)||(t.backTestRltTable.destroy(),t.backTestRltTable=null),t.backTestRlt=[],t.backTestRltColumns=[],Object.keys(a.data[0]).forEach(function(e){t.backTestRltColumns.push(e)}),a.data.forEach(function(e){var a={};t.backTestRltColumns.forEach(function(t){a[t]=e[t]}),t.backTestRlt.push(a)}),e()}).catch(function(t){console.warn("error",t.message),a()})})},getBackTestDataSheet:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/strategyModel/backTestDataSheet.json",axios.create(httpGetCfg).get().then(function(a){_.isNil(t.backTestDataSheetTable)||(t.backTestDataSheetTable.destroy(),t.backTestDataSheetTable=null),t.backTestDataSheet=[],t.dataSheetColumns=[],Object.keys(a.data[0]).forEach(function(e){t.dataSheetColumns.push(e)}),a.data.forEach(function(e){var a={};t.dataSheetColumns.forEach(function(t){a[t]=e[t]}),t.backTestDataSheet.push(a)}),e()}).catch(function(t){console.warn("error",t.message),a()})})},getStatisticalVerify:function(t){var e=this;return new Promise(function(t,a){httpGetCfg.baseURL="/dist/data/strategyModel/statisticalVerify.json",axios.create(httpGetCfg).get().then(function(a){e.statisticalVerify=a.data.map(function(t){return _.get(t,"文字敘述")}),t()}).catch(function(t){console.warn("error",t.message),a()})})},getTrainingMaterials:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/ai/trainingMaterials.json",axios.create(httpGetCfg).get().then(function(a){_.isNil(t.trainingTable)||t.trainingTable.destroy(),t.trainingMaterials=[],t.trainingColumns=[],Object.keys(a.data[0]).forEach(function(e){t.trainingColumns.push(e)}),a.data.forEach(function(e){var a={};t.trainingColumns.forEach(function(t){a[t]=e[t]}),t.trainingMaterials.push(a)}),e()}).catch(function(t){console.warn("error",t.message),a()})})},getMethodOfPrediction:function(t){var e=this;return new Promise(function(a,n){httpGetCfg.baseURL="/dist/data/ai/methodOfPrediction.json",axios.create(httpGetCfg).get().then(function(n){e[t].methodOfPrediction=n.data.map(function(t){return _.get(t,"文字敘述")}),a()}).catch(function(t){console.warn("error",t.message),n()})})},getPredictiveAccuracy:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/ai/predictiveAccuracy.json",axios.create(httpGetCfg).get().then(function(a){t.predictiveAccuracy=a.data.map(function(t){return _.get(t,"文字敘述")}),e()}).catch(function(t){console.warn("error",t.message),a()})})},getPredictiveEffect:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/ai/predictiveEffect.json",axios.create(httpGetCfg).get().then(function(a){t.predictiveEffect=a.data.map(function(t){return _.get(t,"文字敘述")}),e()}).catch(function(t){console.warn("error",t.message),a()})})},getPredictionConclusion:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/ai/predictionConclusion.json",axios.create(httpGetCfg).get().then(function(a){t.predictionConclusion=a.data.map(function(t){return _.get(t,"文字敘述")}),e()}).catch(function(t){console.warn("error",t.message),a()})})},getRoc:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/ai/roc.json",axios.create(httpGetCfg).get().then(function(a){_.isNil(t.rocTable)||t.rocTable.destroy(),t.roc=[],t.rocColumns=[],Object.keys(a.data[0]).forEach(function(e){t.rocColumns.push(e)}),a.data.forEach(function(e){var a={};t.rocColumns.forEach(function(t){a[t]=e[t]}),t.roc.push(a)}),e()}).catch(function(t){console.warn("error",t.message),a()})})},renderTable:function(){var t=this;this.$nextTick(function(){t.backTestRltTable=$("#barCollapse-2 .table").DataTable(),t.backTestDataSheetTable=$("#barCollapse-3 .table").DataTable()})}},watch:{"getOpt.dataType":function(){this.getOpt.categoryIdx=this.indexCategory[0]},"getOpt.categoryIdx":function(){this.getOpt.categoryItem=this.itemCategory[0]},companyInfo:function(t){0!==t.length&&(this.companySelect=this.companyInfo[0]["公司代號"])},companySelect:function(){var t=this,e=this.companyInfo.find(function(e){return e["公司代號"]===t.companySelect});this.setOpt.companyName=_.get(e,"公司名稱"),this.setOpt.companyNum=_.get(e,"公司代號")}},beforeMount:function(){this.druDate=Array.from({length:24},function(t,e){return e+durDateStart})},beforeCreate:function(){var t=this;httpGetCfg.baseURL="/dist/data/menu/industry.json",axios.create(httpGetCfg).get().then(function(e){t.category=e.data.map(function(t){return t.indus})}).catch(function(t){console.warn("error",t.message)}),httpGetCfg.baseURL="/dist/data/menu/company.json",axios.create(httpGetCfg).get().then(function(e){t.companyOri=e.data}).catch(function(t){console.warn("error",t.message)}),httpGetCfg.baseURL="/dist/data/menu/category.json",axios.create(httpGetCfg).get().then(function(e){t.categoryOri=e.data}).catch(function(t){console.warn("error",t.message)}),httpGetCfg.baseURL="/dist/data/menu/unit.json",axios.create(httpGetCfg).get().then(function(e){t.unit=e.data}).catch(function(t){console.warn("error",t.message)})}})});var durDateStart=24,httpGetCfg={baseURL:"/dist/data/menu/industry.json",headers:{Accept:"application/json"},validateStatus:function(t){return t>=200&&t<300||404===t}},callTemp={company:"全部上市櫃股票",dataType:"財報年報",durTime:"最近1年",categoryIdx:"現金流量",categoryItem:"年度投資活動現金流量",dataOption:"當期值",operator:">",num:10},putTemp={dataType:"財報年報",durTime:"最近1年",categoryIdx:"現金流量",categoryItem:"年度投資活動現金流量",dataOption:"當期值",operator:">",num:10};$(function(){if(is("#customized")){chartTheme.colors=["#ff8787"],Highcharts.setOptions(chartTheme);new Vue({el:"#customized",data:{loading:!1,category:[],categoryOri:[],druDate:[],unit:[],selectChart:null,backTestRltColumns:[],dataSheetColumns:[],latestBuyColumns:[],stopLossColumns:[],latestSelect:"全部上市櫃股票",stopLossSelect:"全部上市櫃股票",historyOpt:{startTime:"2019/06",endTime:"2019/06",minMonth:24,maxMonth:24,stopLoss:-20,setCall:!1,setPut:!1,setStopLoss:!1},callOpt:_.cloneDeep(callTemp),putOpt:_.cloneDeep(putTemp),backTestRlt:null,backTestDataSheet:null,statisticalVerify:null,investmentModelDataSource:[],analyzeText:[],latestBuy:null,stopLossCondition:null,latestTable:null,stopLossTable:null,backTestRltTable:null,backTestDataSheetTable:null},computed:{dataCategory:function(){return Array.from(new Set(this.categoryOri.map(function(t){return t["指標類型"]})))},indexCategory:function(){var t=this;return Array.from(new Set(this.categoryOri.filter(function(e){return e["指標類型"]===t.callOpt.dataType}).map(function(t){return t["指標類別"]})))},itemCategory:function(){var t=this;return this.categoryOri.filter(function(e){return e["指標類別"]===t.callOpt.categoryIdx}).map(function(t){return t["項目"]})},putDataCategory:function(){return Array.from(new Set(this.categoryOri.map(function(t){return t["指標類型"]})))},putIndexCategory:function(){var t=this;return Array.from(new Set(this.categoryOri.filter(function(e){return e["指標類型"]===t.putOpt.dataType}).map(function(t){return t["指標類別"]})))},putItemCategory:function(){var t=this;return this.categoryOri.filter(function(e){return e["指標類別"]===t.putOpt.categoryIdx}).map(function(t){return t["項目"]})},chartType:function(){if(this.investmentModelDataSource.length>0){var t=[];return this.investmentModelDataSource.forEach(function(e){Object.keys(e).forEach(function(e){"買進年度"!==e&&t.push(e)})}),[].concat(_toConsumableArray(new Set(t)))}return[]},filterLatestSheet:function(){var t=this;return this.$nextTick(function(){t.latestTable=$("#latestCategory .table").DataTable()}),"全部上市櫃股票"===this.latestSelect?this.latestBuy:this.latestBuy.filter(function(e){return e["產業類別"]===t.latestSelect})},filterStopLoss:function(){var t=this;return this.$nextTick(function(){t.stopLossTable=$("#stopLossCategory .table").DataTable()}),"全部上市櫃股票"===this.stopLossSelect?this.stopLossCondition:this.stopLossCondition.filter(function(e){return e["產業類別"]===t.stopLossSelect})}},methods:{getUnit:function(t){var e=this.unit.filter(function(e){return e["項目"]===t});return e.length>0?e[0]["單位"]:""},submit:function(){var t=this;this.loading=!0;var e={historyOpt:this.historyOpt,callOpt:this.historyOpt.setCall?this.callOpt:null,putOpt:this.historyOpt.setPut?this.putOpt:null};console.warn("send info",e);var a=this.getBackTestRlt(),n=this.getBackTestDataSheet(),s=this.getStatisticalVerify(),o=this.getInvestmentModelDataSource(),r=this.getAnalyzeText(),i=this.getLatestBuy(),c=this.getStopLossCondition(),l=this.getChartData();Promise.all([a,n,s,o,r,i,c,l]).then(function(){t.renderChart(),t.renderTable(),t.loading=!1})},clear:function(t){switch(t){case"callOpt":this.callOpt=_.cloneDeep(callTemp);break;case"putOpt":this.putOpt=_.cloneDeep(putTemp)}},getBackTestRlt:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/strategyModel/backTestRlt.json",axios.create(httpGetCfg).get().then(function(a){_.isNil(t.backTestRltTable)||(t.backTestRltTable.destroy(),t.backTestRltTable=null),t.backTestRlt=[],t.backTestRltColumns=[],Object.keys(a.data[0]).forEach(function(e){t.backTestRltColumns.push(e)}),a.data.forEach(function(e){var a={};t.backTestRltColumns.forEach(function(t){a[t]=e[t]}),t.backTestRlt.push(a)}),e()}).catch(function(t){console.warn("error",t.message),a()})})},getBackTestDataSheet:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/strategyModel/backTestDataSheet.json",axios.create(httpGetCfg).get().then(function(a){_.isNil(t.backTestDataSheetTable)||(t.backTestDataSheetTable.destroy(),t.backTestDataSheetTable=null),t.backTestDataSheet=[],t.dataSheetColumns=[],Object.keys(a.data[0]).forEach(function(e){t.dataSheetColumns.push(e)}),a.data.forEach(function(e){var a={};t.dataSheetColumns.forEach(function(t){a[t]=e[t]}),t.backTestDataSheet.push(a)}),e()}).catch(function(t){console.warn("error",t.message),a()})})},getStatisticalVerify:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/strategyModel/statisticalVerify.json",axios.create(httpGetCfg).get().then(function(a){t.statisticalVerify=a.data.map(function(t){return _.get(t,"文字敘述")}),e()}).catch(function(t){console.warn("error",t.message),a()})})},getInvestmentModelDataSource:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/strategyModel/investmentModelDataSource.json",axios.create(httpGetCfg).get().then(function(a){t.investmentModelDataSource=a.data,_.isNil(t.selectChart)&&(t.selectChart=t.chartType[0]),e()}).catch(function(t){console.warn("error",t.message),a()})})},getAnalyzeText:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/strategyModel/analyzeText.json",axios.create(httpGetCfg).get().then(function(a){t.analyzeText=a.data.map(function(t){return _.get(t,"文字敘述")}),e()}).catch(function(t){console.warn("error",t.message),a()})})},getLatestBuy:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/strategyModel/latestBuy.json",axios.create(httpGetCfg).get().then(function(a){t.latestBuy=[],t.latestBuyColumns=[],Object.keys(a.data[0]).forEach(function(e){t.latestBuyColumns.push(e)}),a.data.forEach(function(e){var a={};t.latestBuyColumns.forEach(function(t){a[t]=e[t]}),t.latestBuy.push(a)}),e()}).catch(function(t){console.warn("error",t.message),a()})})},getStopLossCondition:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/strategyModel/stopLossCondition.json",axios.create(httpGetCfg).get().then(function(a){t.stopLossCondition=[],t.stopLossColumns=[],Object.keys(a.data[0]).forEach(function(e){t.stopLossColumns.push(e)}),a.data.forEach(function(e){var a={};t.stopLossColumns.forEach(function(t){a[t]=e[t]}),t.stopLossCondition.push(a)}),e()}).catch(function(t){console.warn("error",t.message),a()})})},getChartData:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/chartData/chartData.json";var n=axios.create(httpGetCfg).get();Promise.all([n]).then(function(a){t.chartData=a[0].data,e()}).catch(function(t){a(t)})})},renderChart:function(){var t=this;if(0!==this.investmentModelDataSource.length){var e=_.cloneDeep(barOpts);if(!_.isNil(_.get(this.investmentModelDataSource[0],this.selectChart))){e.xAxis.categories=null,e.series=[{name:null,data:[],showInLegend:!1}],this.investmentModelDataSource.forEach(function(a){e.series[0].data.push([a["買進年度"],a[t.selectChart]])}),e.series[0].data.sort(function(t,e){return t[0]-e[0]});Highcharts.chart("chartContent",e)}}},renderTable:function(){var t=this;this.$nextTick(function(){t.backTestRltTable=$("#barCollapse-2 .table").DataTable(),t.backTestDataSheetTable=$("#barCollapse-3 .table").DataTable()})}},watch:{"callOpt.dataType":function(){this.callOpt.categoryIdx=this.indexCategory[0]},"callOpt.categoryIdx":function(){this.callOpt.categoryItem=this.itemCategory[0]},"putOpt.dataType":function(){this.putOpt.categoryIdx=this.putIndexCategory[0]},"putOpt.categoryIdx":function(){this.putOpt.categoryItem=this.putItemCategory[0]},selectChart:function(){this.renderChart()},latestSelect:function(){_.isNil(this.latestTable)||this.latestTable.destroy()},stopLossSelect:function(){_.isNil(this.stopLossTable)||this.stopLossTable.destroy()}},beforeMount:function(){this.druDate=Array.from({length:24},function(t,e){return e+durDateStart})},beforeCreate:function(){var t=this;httpGetCfg.baseURL="/dist/data/menu/industry.json",axios.create(httpGetCfg).get().then(function(e){t.category=e.data.map(function(t){return t.indus}),console.warn("get category",[e.data,t.category])}).catch(function(t){console.warn("error",t.message)}),httpGetCfg.baseURL="/dist/data/menu/category.json",axios.create(httpGetCfg).get().then(function(e){t.categoryOri=e.data}).catch(function(t){console.warn("error",t.message)}),httpGetCfg.baseURL="/dist/data/menu/unit.json",axios.create(httpGetCfg).get().then(function(e){t.unit=e.data}).catch(function(t){console.warn("error",t.message)})}})}});var durDateStart=24,httpGetCfg={baseURL:"",headers:{Accept:"application/json"},validateStatus:function(t){return t>=200&&t<300||404===t}};$(function(){if(is("#snow")){chartTheme.colors=["#1989a3"],Highcharts.setOptions(chartTheme);new Vue({el:"#snow",data:{loading:!1,category:[],druDate:[],selectChart:null,backTestRltColumns:[],dataSheetColumns:[],latestBuyColumns:[],stopLossColumns:[],latestSelect:"全部上市櫃股票",stopLossSelect:"全部上市櫃股票",setOpts:{company:"全部上市櫃股票",endTime:"2019/06",druTime:24,stopCall:!1,setPut:!1,setCall:!1},backTestRlt:null,backTestDataSheet:null,statisticalVerify:null,investmentModelDataSource:[],analyzeText:[],latestBuy:null,stopLossCondition:null,latestTable:null,stopLossTable:null,backTestRltTable:null,backTestDataSheetTable:null},computed:{chartType:function(){if(this.investmentModelDataSource.length>0){var t=[];return this.investmentModelDataSource.forEach(function(e){Object.keys(e).forEach(function(e){"買進年度"!==e&&t.push(e)})}),[].concat(_toConsumableArray(new Set(t)))}return[]},filterLatestSheet:function(){var t=this;return this.$nextTick(function(){t.latestTable=$("#latestCategory .table").DataTable()}),"全部上市櫃股票"===this.latestSelect?this.latestBuy:this.latestBuy.filter(function(e){return e["產業類別"]===t.latestSelect})},filterStopLoss:function(){var t=this;return this.$nextTick(function(){t.stopLossTable=$("#stopLossCategory .table").DataTable()}),"全部上市櫃股票"===this.stopLossSelect?this.stopLossCondition:this.stopLossCondition.filter(function(e){return e["產業類別"]===t.stopLossSelect})}},methods:{submit:function(){var t=this;this.loading=!0,console.warn("send info",this.setOpts);var e=this.getBackTestRlt(),a=this.getBackTestDataSheet(),n=this.getStatisticalVerify(),s=this.getInvestmentModelDataSource(),o=this.getAnalyzeText(),r=this.getLatestBuy(),i=this.getStopLossCondition(),c=this.getChartData();Promise.all([e,a,n,s,o,r,i,c]).then(function(){t.renderChart(),t.renderTable(),t.loading=!1})},getBackTestRlt:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/strategyModel/backTestRlt.json",axios.create(httpGetCfg).get().then(function(a){_.isNil(t.backTestRltTable)||(t.backTestRltTable.destroy(),t.backTestRltTable=null),t.backTestRlt=[],t.backTestRltColumns=[],Object.keys(a.data[0]).forEach(function(e){t.backTestRltColumns.push(e)}),a.data.forEach(function(e){var a={};t.backTestRltColumns.forEach(function(t){a[t]=e[t]}),t.backTestRlt.push(a)}),e()}).catch(function(t){console.warn("error",t.message),a()})})},getBackTestDataSheet:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/strategyModel/backTestDataSheet.json",axios.create(httpGetCfg).get().then(function(a){_.isNil(t.backTestDataSheetTable)||(t.backTestDataSheetTable.destroy(),t.backTestDataSheetTable=null),t.backTestDataSheet=[],t.dataSheetColumns=[],Object.keys(a.data[0]).forEach(function(e){t.dataSheetColumns.push(e)}),a.data.forEach(function(e){var a={};t.dataSheetColumns.forEach(function(t){a[t]=e[t]}),t.backTestDataSheet.push(a)}),e()}).catch(function(t){console.warn("error",t.message),a()})})},getStatisticalVerify:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/strategyModel/statisticalVerify.json",axios.create(httpGetCfg).get().then(function(a){t.statisticalVerify=a.data.map(function(t){return _.get(t,"文字敘述")}),e()}).catch(function(t){console.warn("error",t.message),a()})})},getInvestmentModelDataSource:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/strategyModel/investmentModelDataSource.json",axios.create(httpGetCfg).get().then(function(a){t.investmentModelDataSource=a.data,_.isNil(t.selectChart)&&(t.selectChart=t.chartType[0]),e()}).catch(function(t){console.warn("error",t.message),a()})})},getAnalyzeText:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/strategyModel/analyzeText.json",axios.create(httpGetCfg).get().then(function(a){t.analyzeText=a.data.map(function(t){return _.get(t,"文字敘述")}),e()}).catch(function(t){console.warn("error",t.message),a()})})},getLatestBuy:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/strategyModel/latestBuy.json",axios.create(httpGetCfg).get().then(function(a){t.latestBuy=[],t.latestBuyColumns=[],Object.keys(a.data[0]).forEach(function(e){t.latestBuyColumns.push(e)}),a.data.forEach(function(e){var a={};t.latestBuyColumns.forEach(function(t){a[t]=e[t]}),t.latestBuy.push(a)}),e()}).catch(function(t){console.warn("error",t.message),a()})})},getStopLossCondition:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/strategyModel/stopLossCondition.json",axios.create(httpGetCfg).get().then(function(a){t.stopLossCondition=[],t.stopLossColumns=[],Object.keys(a.data[0]).forEach(function(e){t.stopLossColumns.push(e)}),a.data.forEach(function(e){var a={};t.stopLossColumns.forEach(function(t){a[t]=e[t]}),t.stopLossCondition.push(a)}),e()}).catch(function(t){console.warn("error",t.message),a()})})},getChartData:function(){var t=this;return new Promise(function(e,a){httpGetCfg.baseURL="/dist/data/chartData/chartData.json";var n=axios.create(httpGetCfg).get();Promise.all([n]).then(function(a){t.chartData=a[0].data,e()}).catch(function(t){a(t)})})},renderChart:function(){var t=this;if(0!==this.investmentModelDataSource.length){var e=_.cloneDeep(barOpts);if(!_.isNil(_.get(this.investmentModelDataSource[0],this.selectChart))){e.xAxis.categories=null,e.series=[{name:null,data:[],showInLegend:!1}],this.investmentModelDataSource.forEach(function(a){e.series[0].data.push([a["買進年度"],a[t.selectChart]])}),e.series[0].data.sort(function(t,e){return t[0]-e[0]});Highcharts.chart("chartContent",e)}}},renderTable:function(){var t=this;this.$nextTick(function(){t.backTestRltTable=$("#barCollapse-2 .table").DataTable(),t.backTestDataSheetTable=$("#barCollapse-3 .table").DataTable()})}},watch:{selectChart:function(){this.renderChart()},latestSelect:function(){_.isNil(this.latestTable)||this.latestTable.destroy()},stopLossSelect:function(){_.isNil(this.stopLossTable)||this.stopLossTable.destroy()}},beforeMount:function(){this.druDate=Array.from({length:24},function(t,e){return e+durDateStart})},beforeCreate:function(){var t=this;httpGetCfg.baseURL="/dist/data/menu/industry.json",axios.create(httpGetCfg).get().then(function(e){t.category=e.data.map(function(t){return t.indus})}).catch(function(t){console.warn("error",t.message)})}})}});